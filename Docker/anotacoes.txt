## Instalação Docker - Descomplicando Docker LinuxTips
# su (e inserir sua senha)
# curl -fsSL https://get.docker.com/ | bash

## VERSÃO DOCKER
#docker version 

## Executar um container "hello-World"
# docker container run -ti hello-world

#Verificar container
#docker container ls
#docker container ls -a (trás todos containers) e os detalhes.

#explicação execução container
#docker container -ti (significa que o docker irá executar um container com terminal e interatividade)
#docker container -ti ubuntu (instala um container com uma imagem ubuntu)
#apos isso o terminal abre essa imagem e mostra root@"066041630"
# exit | sai do container | matar container
# sair do container sem matar ele | ctrl + p + q
#entrar novamente no container
#docker container attach +"id do container ou nome"
#docker container -d | executa o container como um daemon não como um -ti terminal de interatividade.

#executar container
#docker container -ti "+id container" bash (sem aspas, e o bash no final executa um terminal bash)
# Qual o comando que eu posso executar para visualizar todos os containers?: # docker container ls -a
# Qual o comando que eu posso executar para pausar determinado container?: # docker container pause [CONTAINER ID]
# Como eu posso sair do container sem mata-lo? : CTRL + p + q
# Qual comando eu utilizo para que seja executado determinado comando dentro do container?: # docker container exec -ti [CONTAINER ID] [COMANDO]
#docker container stop "+id container" (sem aspas)
#docker container start 
#docker container restart
#todos esses comandos acima deve inserir o container ir após o comando. para executar pausar etc
#docker container inspect "+idcontainer" (sem aspas) ele trás todas informaçoes do container.


# CONFIGURANDO CPU E MEMÓRIA  

#docker container stats (verificar quanto de recurso esse container está usando, memoria cpu etc)
#docker container inspect (inspecionar container, e pegar o ip )
#curl +IP (abrir a net, abre a pagina web)
# comando top (trás mais informações do container)
#stress --cpu --vmbytes 128 --vm 1 (simula um estresse na cpu, modifica os bytes, simula 1 vm.)

#docker container rm -f "+idcontainer"

#docker container run -d -m 128M ngnix (cria um container com 128 de memoria)
#docker container inspect cce (tras as 3 primeiras informações)



Qual o comando para listar as imagens que estão no host?
docker image ls
docker images
Qual o nome do arquivo onde adiciono informações sobre a imagem que irei buildar?
Dockerfile
Qual o comando utilizado para buildar (construir) uma imagem?
docker image build


final do dia 1


# Inicio dia 2

#montar imagem


#docker container /opt/giropoops (diretorio especifico)
é necessário fazer a gestao dos volumes no seu dockerfile
#docker container run -ti --mount type-bind,src=/opt/giropoops,dst=/giropoops debian (montando uma imagem em diretorio especifico) se colocar ro no final significa READ ONLY





#criar imagem do postegress

#dentro do diretorio
#docker container create -v /data --name dados centos
# docker container run -d -p 5432:5432 --name pgsql1 --volumes--from dbdados -e POSTEGRESQL_USER=docker -e POSTEGRESQL_PASS=docker -e POSTEGRESQL_DB=docker kamui/postgresql
# docker container run -d -p 5433:5432 --name pgsql2 --volumes--from dbdados -e POSTEGRESQL_USER=docker -e POSTEGRESQL_PASS=docker -e POSTEGRESQL_DB=docker kamui/postgresql


Resposta desafio #####

docker volume create dbdados
docker volume ls

docker container run -d -p 5432:5432 --name pgsql1 --mount type=volume,src=dbdados,dst=/data -e POSTEGRESQL_USER=docker -e POSTEGRESQL_PASS=docker -e POSTEGRESQL_DB=docker kamui/postgresql

docker container run -d -p 5433:5432 --name pgsql2 --mount type=volume,src=dbdados,dst=/data -e POSTEGRESQL_USER=docker -e POSTEGRESQL_PASS=docker -e POSTEGRESQL_DB=docker kamui/postgresql
docker volume ls 
docker volume inspect dbdados (inspeciona, e acessa diretorio)
#exemplo de backup
mkdir /opt/backup

subir o container e montar volume
docker container run -ti --mount type=volume,src=dbdados,dst=/data --mount type=bind,src=/opt/backup,dst=/backup debian tar -cvf  /backup/bkp-banco.tar /data (tar empacota em cvf)

Quando criamos um volume do tipo bind, quais os parâmetros para indicar onde o volume será montado no container?
dst
destination
Quando criamos um volume do tipo volume, quais os parâmetros para indicar o nome do volume que será montado no container?
source
src
É possível montar um volume como somente leitura em um container? SIM
Qual o parâmetro para montar um volume em um container como somente leitura?
ro
Quando o container é removido, o volume também será removido? NAO
Qual o comando para montar um volume do tipo volume em um container?
docker container run -d --mount type=volume,source=giropops,destination=/var/opa nginx
Qual o comando utilizado para criar um volume?
docker volume create giropops
Qual o comando para remover um volume?
docker volume rm giropops
Qual o comando utilizado para listar todos os volumes?
docker volume ls
Qual o comando utilizado para remover todos os volumes que não estão sendo utilizado por nenhum container?
docker volume prune
Qual o comando para montar um volume do tipo bind em um container?
docker container run -ti --mount type=bind,src=/root/primeiro_container,dst=/volume ubuntu
Qual o diretório no host onde ficam os volumes criados?
/var/lib/docker/volumes
Qual o comando utilizado para ver detalhes sobre um determinado volume?
docker volume inspect giropops
























